<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Minimore" />
    <link rel="apple-touch-icon" href="https://lh3.googleUserContent.com/d/1n6WREaza8QhZFQFLvpZYD0wzYXSwK0aF" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#4A90E2" />

    <title>Online Minimore Store</title>
    <link rel="icon" href="https://lh3.googleUserContent.com/d/1n6WREaza8QhZFQFLvpZYD0wzYXSwK0aF" />

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f2f5;
        }

        /* --- ส่วนเนื้อหาปกติ (สำหรับ Chrome) --- */
        .iframe-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; /* ซ่อนไว้ก่อนเป็นค่าเริ่มต้น */
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            visibility: hidden;
        }
        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 6px solid #f3f3f3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            z-index: 10;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* --- ส่วนแจ้งเตือน (สำหรับเบราว์เซอร์อื่น) --- */
        .browser-warning {
            display: none; /* ซ่อนไว้ก่อนเป็นค่าเริ่มต้น */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .browser-warning img {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
        }
        .browser-warning h2 {
            margin-top: 0;
            font-size: 1.5rem;
            color: #333;
        }
        .browser-warning p {
            color: #666;
            max-width: 400px;
        }
        .copy-button {
            background-color: #4285F4; /* Google Blue */
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #357ae8;
        }
        .copy-message {
            margin-top: 15px;
            font-size: 0.9rem;
            color: green;
            font-weight: bold;
            height: 20px; /* จองพื้นที่ไว้กันหน้ากระตุก */
        }
    </style>
</head>
<body>

    <div class="iframe-container">
        <div class="loader" id="loader"></div>
        <iframe
            src="https://script.google.com/macros/s/AKfycbw1nBYxr63UN7iAx_wpSOlbCev54l9ryaCZ_bSR_0vFgBkSglOq3fqVX5aeCluaCNkF/exec"
            title="M-IT Support"
            allowfullscreen>
        </iframe>
    </div>

    <div class="browser-warning" id="browser-warning">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Google_Chrome_icon_%28September_2014%29.svg" alt="Google Chrome Icon" />
        <h2>กรุณาเปิดใน Google Chrome</h2>
        <p>เพื่อประสบการณ์การใช้งานที่ดีที่สุด<br>กรุณาคัดลอกลิงก์และนำไปเปิดในเบราว์เซอร์ Google Chrome</p>
        <button class="copy-button" id="copy-link-btn">คัดลอกลิงก์</button>
        <p class="copy-message" id="copy-message"></p>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const userAgent = navigator.userAgent;
            // ตรวจสอบว่าเป็น Chrome และไม่ใช่ Edge (Chromium)
            const isChrome = userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Edg") === -1;

            const chromeContent = document.querySelector('.iframe-container');
            const warningContent = document.getElementById('browser-warning');

            if (isChrome) {
                // ถ้าเป็น Chrome ให้แสดงเนื้อหา iframe
                chromeContent.style.display = 'block';

                const iframe = document.querySelector('iframe');
                const loader = document.getElementById('loader');
                iframe.onload = function () {
                    if (loader) {
                        loader.style.display = 'none';
                    }
                    iframe.style.visibility = 'visible';
                };

            } else {
                // ถ้าไม่ใช่ Chrome ให้แสดงหน้าแจ้งเตือน
                warningContent.style.display = 'flex';

                const copyBtn = document.getElementById('copy-link-btn');
                const copyMessage = document.getElementById('copy-message');
                const linkToCopy = 'https://m-it-application.github.io/test_01/';

                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(linkToCopy).then(() => {
                        // เมื่อคัดลอกสำเร็จ
                        copyBtn.textContent = 'คัดลอกแล้ว!';
                        copyMessage.textContent = 'คัดลอกสำเร็จ! นำไปวางใน Chrome ได้เลย';

                        // เปลี่ยนข้อความกลับใน 3 วินาที
                        setTimeout(() => {
                            copyBtn.textContent = 'คัดลอกลิงก์';
                            copyMessage.textContent = '';
                        }, 3000);

                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                        copyMessage.textContent = 'คัดลอกไม่สำเร็จ';
                    });
                });
            }
        });
    </script>
</body>
</html>
